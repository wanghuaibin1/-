import{g as o,E as r}from"./index-1c0f8296.js";import{r as s}from"./request-e4260cb3.js";const d=t=>s.get("/cart/select",t),p=t=>s.post_urlencoded("/cart/add",t),i=t=>s.delete("/cart/delete",t),n=t=>s.post_urlencoded("/cart/update",t),g=t=>s.get("/product/randomlyRecommendProducts",t),m=t=>s.get("/product/getInfo",t),I=t=>s.get("/comment/getCommentsByProductId",t),h=o("cartaa",{state:()=>({cartList:[]}),getters:{isAll(){this.cartList.every(t=>t.selected)},allCount(){return this.cartList.reduce((t,e)=>t+e.quantity,0)},selectedCount(){return this.cartList.filter(t=>t.selected).reduce((t,e)=>t+e.quantity,0)},selectedPrice(){return this.cartList.filter(t=>t.selected).reduce((t,e)=>t+e.quantity*e.productPrice,0)}},actions:{async updateNewList(t){const e=sessionStorage.getItem("userID"),{data:a}=await d({uid:e});this.cartList=a.value.data,this.cartList.map(c=>{c.selected=!0})},allCheck(t){this.cartList.forEach(e=>e.selected=t),console.log(this.cartList)},singleCheck(t,e){const a=this.cartList.find(c=>c.cartId===t);a.selected=e},async delCart(t){const{data:e}=await i({pid:t.productId});console.log(e),e.value.code===200?(r({message:e.value.message,type:"success"}),this.updateNewList()):r.error("删除失败")},async cartup(t){await n({pid:t.productId,quantity:t.quantity})}}});export{p as a,I as b,d as c,m as g,g as p,h as u};
