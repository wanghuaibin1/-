import{m as C,a as F}from"./login-37e994b6.js";import{I as k,l as q,h as f,r as _,a as m,o as I,c as U,b as t,e as v,d as o,w as r,t as $,F as j,E as p}from"./index-1c0f8296.js";import"./request-e4260cb3.js";const B={class:"h-[80vh] flex items-center"},N={class:"w-1/3 m-auto"},P={class:"flex justify-between h-16 items-center"},R=t("div",{class:"text-2xl text-gray-500"},"注册",-1),A={class:"w-full bg-white flex items-center justify-center pb-8 pt-12"},E={class:"w-3/4"},M=t("div",{class:"h-[20vh]"},[t("div",{class:"h-full w-[20%] m-auto"},[t("div",{class:"flex items-center justify-around h-2/3 text-xl text-gray-500"},[t("div",null,"帮助"),t("div",null,"隐私"),t("div",null,"条款")]),t("p",{class:"text-center"},"Copyright © 2024 - Presentlilishop版权所有")])],-1),G=k({__name:"index",setup(S){const b=q(),c=f(),i=f(!1),u=f(0),x=n=>{n.validateField("email").then(async e=>{const{data:a}=await C({email:l.email});a.value.code===200?p({message:a.value.message,type:"success"}):a.value.code===400&&p.error("发送失败"),!(u.value>0||i.value)&&(i.value=!0,w(),setTimeout(()=>{i.value=!1},2e3))})},w=()=>{u.value=60;const n=setInterval(()=>{u.value--,u.value<=0&&clearInterval(n)},1e3)},l=_({name:"",password:"",phone:"",code:"",email:""}),h=_({name:[{required:!0,message:"请填写用户名",trigger:"blur"},{min:3,max:20,message:"用户名过短"}],password:[{required:!0,message:"请填写密码",trigger:"blur"}],phone:[{required:!0,message:"请填写手机号",trigger:"blur"},{min:11,max:11,message:"请填写正确的手机号"}],code:[{required:!0,message:"请填写验证码",trigger:"blur"}],email:[{required:!0,message:"请填写邮箱",trigger:"blur"}]}),V=n=>{n&&n.validate(async e=>{if(e){const{data:a}=await F({name:l.name,password:l.password,phone:l.phone,code:l.code,email:l.email});console.log(a),a.value.code===200?(p({message:a.value.message,type:"success"}),b.push("/login")):p.error("注册失败")}else return!1})};return(n,e)=>{const a=m("el-input"),d=m("el-form-item"),g=m("el-button"),y=m("el-form");return I(),U(j,null,[t("div",B,[t("div",N,[t("div",P,[R,t("div",null,[v("已有账号？ "),t("span",{class:"text-blue-500 cursor-pointer",onClick:e[0]||(e[0]=s=>n.$router.push("/login"))},"立即登录")])]),t("div",A,[t("div",E,[o(y,{ref_key:"ruleFormRef",ref:c,size:"large","label-position":"top",model:l,"status-icon":"",rules:h,"label-width":"120px",class:"demo-ruleForm"},{default:r(()=>[o(d,{prop:"name"},{default:r(()=>[o(a,{modelValue:l.name,"onUpdate:modelValue":e[1]||(e[1]=s=>l.name=s),autocomplete:"off",placeholder:"用户名",clearable:""},null,8,["modelValue"])]),_:1}),o(d,{prop:"password"},{default:r(()=>[o(a,{modelValue:l.password,"onUpdate:modelValue":e[2]||(e[2]=s=>l.password=s),type:"password",placeholder:"密码",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1}),o(d,{prop:"phone"},{default:r(()=>[o(a,{modelValue:l.phone,"onUpdate:modelValue":e[3]||(e[3]=s=>l.phone=s),type:"text",maxlength:"11",placeholder:"手机号",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1}),o(d,{prop:"email"},{default:r(()=>[o(a,{modelValue:l.email,"onUpdate:modelValue":e[4]||(e[4]=s=>l.email=s),type:"text",placeholder:"邮箱",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1}),o(d,{prop:"code"},{default:r(()=>[o(a,{modelValue:l.code,"onUpdate:modelValue":e[6]||(e[6]=s=>l.code=s),modelModifiers:{number:!0},clearable:"",placeholder:"验证码"},{append:r(()=>[o(g,{onClick:e[5]||(e[5]=s=>x(c.value)),disabled:i.value||u.value>0},{default:r(()=>[v($(i.value?"发送中...":u.value>0?`${u.value}秒后重试`:"发送验证码"),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),o(d,null,{default:r(()=>[o(g,{class:"w-full",type:"primary",onClick:e[7]||(e[7]=s=>V(c.value))},{default:r(()=>[v("注册")]),_:1})]),_:1})]),_:1},8,["model","rules"])])])])]),M],64)}}});export{G as default};
